<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<title>Page</title>
	<script type="text/javascript" src="..\js\jquery-3.4.1.js"></script>
	<script type="text/javascript" src="..\js\webui.js"></script>
	<link rel="stylesheet" type="text/css" href="..\css\webui.css">
	<link rel="stylesheet" type="text/css" href="..\css\commonCSS.css">
  	<style type="text/css">
  		.txt{
			text-decoration: none;
			font-size: 12px;
			color: #9c9c9c;
			float: right;
			padding-right: 20px;
			padding-top: 6px;
  		}
  		 a:hover{
			color:lightskyblue;
  		}
        .input-groups .ui-input{
        width:122px;
        }
        .input-group-block{
        width:300px;
        float: left;
        }
        .input-group-text{
        color:#333;
        font-size:12px;
        }
        #button{
        margin-left:320px;
        padding-top:10px;
        }
        .datagrid-cell-rownumber{
  		height: 28px;
  		}
	    body{
	    width:100%;
	    height:100%;
	    overflow-y:scroll;
	    overflow-x:auto;
	    }
	    .hid{
		display:none;
		}
  	</style>
  	<!-- 数组实现二级级联地市 -->
  	<script type="text/javascript">  		 
  　　var aCity=new Array();//定义一个二维数组aArray,用于存放城市名称。 
  　　aCity[0]=new Array(); 
  　　aCity[1]=new Array(); 
  　　aCity[2]=new Array(); 
  　　aCity[3]=new Array();
	  	 aCity[4]=new Array();
	  	 aCity[5]=new Array();
	  	 aCity[6]=new Array(); 
  　　
  　　aCity[0][0]="--请选择--"; //杭州市 
  　　aCity[1][0]="--请选择--"; 
  　　aCity[1][1]="全  部";
  	     aCity[1][2]="西湖区"; 
  　　aCity[1][3]="滨江区"; 
  　　aCity[1][4]="江干区"; 
  　　aCity[1][5]="拱墅区"; 
  　　aCity[1][6]="萧山区";
  	     aCity[1][7]="江干区";
  	    
  　　aCity[2][0]="--请选择--";  //湖州市
  　　aCity[2][1]="全  部";
  		 aCity[2][2]="长兴县"; 
  　　aCity[2][3]="德清县"; 
  　　aCity[2][4]="南浔区";
  		 aCity[2][5]="吴兴区";
  		 aCity[2][6]="安吉县";
  		
  　　aCity[3][0]="--请选择--"; //嘉兴市
  　　aCity[3][1]="全  部";
  		 aCity[3][2]="海宁市"; 
  　　aCity[3][3]="海盐县"; 
  　　aCity[3][4]="嘉善县";
  		 aCity[3][5]="南湖区";
  		 aCity[3][6]="桐乡市";
  		 aCity[3][7]="秀洲区";
  		
  		 aCity[4][0]="--请选择--"; //衢州市
  　　aCity[4][1]="全  部";
  		 aCity[4][2]="常山县"; 
  　　aCity[4][3]="江山市"; 
  　　aCity[4][4]="开化县";
	   	 aCity[4][5]="柯城区";
	  	 aCity[4][6]="龙游县";
	  	 aCity[4][7]="衢江区";
  		
  		 aCity[5][0]="--请选择--"; //绍兴市
  　　aCity[5][1]="全  部";
  		 aCity[5][2]="柯桥区"; 
  　　aCity[5][3]="嵊州市"; 
  　　aCity[5][4]="上虞区";
	  	 aCity[5][5]="新昌县";
	  	 aCity[5][6]="越城区";
	  	 aCity[5][7]="诸暨市";
  		 
  		 aCity[6][0]="--请选择--"; //台州市
  　　aCity[6][1]="全  部";
  		 aCity[6][2]="黄岩区"; 
  　　aCity[6][3]="椒江区"; 
  　　aCity[6][4]="路桥区";
	  	 aCity[6][5]="三门县";
	  	 aCity[6][6]="天台县";
	  	 aCity[6][7]="温岭市"; 
  　　function ChangeCity() 
　　{ 
	　　var i,iProvinceIndex; 
	　　iProvinceIndex=document.frm1.optProvince.selectedIndex; 
	　　iCityCount=0; 
	　　while (aCity[iProvinceIndex][iCityCount]!=null) 
	　　iCityCount++; 
	　　//计算选定省份的城市个数 
	　　document.frm2.optCity.length=iCityCount;//改变下拉菜单的选项数 
	　　for (i=0;i<=iCityCount-1;i++)//改变下拉菜单的内容 
	　　document.frm2.optCity[i]=new Option(aCity[iProvinceIndex][i]); 
	　　document.frm2.optCity.focus(); 
	　　} 
  	</script>
<body>
	<!--头部导航栏-->
	<div style="height: 30px;background-color: #f2f2f2">
		<span style="font-size: 12px;color: #9c9c9c;width: 180px;margin-left: 50px;display: inline-block;margin-top: 6px;">欢迎来到客户信息系统页面>>></span>
		<span style="padding-left: 20px;"><a href="javascript:void(0)" style="color: #f7245b;" class="txt">请登录</a></span>		
		<span><a href="javascript:void(0)" class="txt" >历史记录</a></span>
		<span><a href="javascript:void(0)" class="txt" >个人中心</a></span>
		<span><a href="javascript:void(0)" class="txt" >版本信息</a></span>
		<span><a href="javascript:void(0)" class="txt" >English</a></span>
		<span><a href="javascript:void(0)" class="txt" >联系我们</a></span>
	</div>
	<!-- 头部展示栏 -->
	<div style="height: 84px;">
		<div><a href="https://www.10086.cn" target="_blank"><img src="..\images\ydong.png" style="padding-left: 60px;"></a></div>
	</div>
	<br>
	<hr>
	<br>
	
	<div class="page-container" style="width:100%;">
    	<!-- 查询条件部分 -->
    	<div class="grid" style="width: 933px;margin: 0 auto;" id="head">    		
    		<fieldset>
    		<legend style="color: lightskyblue;">>>>查询条件</legend>			 
   				 <div class="input-groups">
		    <!--input-group-block的宽度和ui-input的宽度需要自行设定三列输入框宽度一般为122px-->
		    <div class="left input-group-block">
		        <p class="input-group-text " style="padding-left: 2em;">查询区域<span style="color:#f7245b;"> * </span>：<input type="text"  class="ui-input ui-input-small " id="cc"/> </p>
		        <p class="input-group-text mustwrite" >退费服务号码<span style="color:#f7245b;"> * </span>：<input type="text"  class="ui-input ui-input-small "/> </p>
		        <p class="input-group-text label" style="padding-left: 1em;">操作起始时间：<input type="text" class="ui-input ui-input-small webui-datebox " id="start1"/> </p>
		    	<p class="input-group-text label">错收费用开始月：<input type="text" class="ui-input ui-input-small webui-datebox " id="start2"/> </p>
		    	<p class="input-group-text label" style="padding-left: 12em;">自定义反馈：</p> 
		    </div>
		    <div class="left input-group-block">
		        <p class="input-group-text" style="padding-left: 3em;">客户标识：<input type="text"  class="ui-input ui-input-small  "/> </p>
		        <p class="input-group-text" style="padding-left: 2em;">操作员工号：<input type="text"  class="ui-input ui-input-small "/> </p>
		        <p class="input-group-text label" style="padding-left: 1em;">操作截止时间：<input type="text" class="ui-input ui-input-small webui-datebox " id="end1"/> </p>
		        <p class="input-group-text label">错收费用截止月：<input type="text"  class="ui-input ui-input-small webui-datebox" id="end2"/> </p>
		   		<p id="radio-nomarl"></p>
		    </div>
		    <div class="left input-group-block">
		        <p class="input-group-text" style="padding-left: 3em;">客户名称：<input type="text"  class="ui-input ui-input-small "/> </p>
		        <p class="input-group-text" style="padding-left: 1em;">子号用户信息：<input type="text"  class="ui-input ui-input-small "/> </p>
		        <p class="input-group-text mustwrite" style="padding-left: 1em;">SP业务代码<span style="color:#f7245b;"> * </span>：<input type="text"  class="ui-input ui-input-small"/> </p>
		  		<p class="input-group-text mustwrite" id="in">反馈模板<span style="color:#f7245b;"> * </span>：<input type="text" class="ui-input ui-input-small" style="height:60px;padding-left: 3em;" id="fk"/></p>
		    </div>

		    <div style="clear: both;"></div><!-- 清除浮动带来影响 -->
		    <p id="button">
		        <a  href="#nogo" class="webui-linkbutton btn-blue" onClick='show()' style="height:28px;">加载 </a>
		        <a  href="#nogo" class="webui-linkbutton btn-blue" onClick='doSearch()' style="height:28px;">查询 </a>
		        <a  href="#nogo" class="webui-linkbutton btn-blue" onclick="resver()" style="height:28px;">重置 </a>
		    </p>  	
		   	</div>
		   	</fieldset>
		</div>
		<!-- 日期、地区组合框、选择、重置等功能js -->
		<script>
		$(function () {
			//联合日期
            $('#start1').datebox().datebox('calendar').calendar();
            $('#end1').datebox().datebox('calendar').calendar({
                validator: function (date) {
                    var _start = $('#start1').datebox("getValue");
                    var _s = new Date(_start);
                    var _outStart = new Date(_s.getFullYear(), _s.getMonth(), _s.getDate());
                    return _outStart <= date;
                }
            });
            $('#start2').datebox().datebox('calendar').calendar();
            $('#end2').datebox().datebox('calendar').calendar({
                validator: function (date) {
                    var _start = $('#start2').datebox("getValue");
                    var _s = new Date(_start);
                    var _outStart = new Date(_s.getFullYear(), _s.getMonth(), _s.getDate());
                    return _outStart <= date;
                }
            });
            //必填项
            $('.mustwrite').validatebox({
		        required: true,  
		    });
            //组合框(地区)
		 	$('#cc').combobox({
	            url:'../data/combobox_data.json',
	            valueField:'id',
	            textField:'text',
	            editable:false
	            });
		 	//选择组件
            var radio_normal = $("#radio-nomarl").AISelect({
			    type: 'radio',
			    displayField: 'channelName',
			    valueField: 'channelId',
			    data: [{
			        channelId: '1001',
			    	channelName: '是'
			    }, {
			    	channelId: '1002',
			    	channelName: '否'
			    }],
			    onSelect: function(obj) {
				    if(obj.getSelectedIndex() == 1){
				    	$("#in").removeClass("hid");
				    } else {
				    	$("#in").addClass("hid");
				    }
			    },
			    	must: false
			    });	    	
        });	 
		//重置
		function resver() {
			$("#head input").val(" ");
		}
	</script>
		
		<!-- 表格展示部分 -->
		<div>
			<div style="width: 933px;margin: 0 auto;">
			<fieldset>
    		<legend style="color: lightskyblue;">>>>数据表格</legend>
			<table id="dg"></table>
               
                <!-- 初始化表格 -->
                <script>   
  					var DATARESULT;
                	$("#dg").datagrid({
                        width: 890,
                        height:380,
                        iconCls: 'icon-edit',
                        rownumbers: true,//显示行号栏                    
                        checkOnSelect:false,//点击一行不选中前面的复选框
                        pagination: true, //显示分页栏
                        pageSize: 10,//分页条件
                        pageList:[10,20,50],
                        toolbar: ["-", {//头部菜单
                            text: '新增',
                            iconCls: 'icon-add',
                            plain: true,
                            handler: function () {
                                append()
                            }
                        }, "-", {
                            text: '删除',
                            iconCls: 'icon-remove',
                            handler: function () {
                                removeit()
                            }
                        }],
                        columns: [[
                        	{field: 'ck', checkbox: true},
                            {field: 'phonenum', title: '服务号码', width: 98, editor: 'numberbox', align: 'center'},
                            {field: 'custi', title: '客户标识', width: 70, editor: 'text', align: 'center'},
                            {field: 'custn',title: '客户名称',width: 80,editor: 'text',align: 'center'},
                            {field: 'area', title: '查询区域', width: 60, editor: 'text', align: 'center'},
                            {field: 'time1', title: '操作起始时间', width: 108, editor: 'text', align: 'center'},
                            {field: 'time2', title: '操作截止时间', width: 108, editor: 'text', align: 'center'},
                            {field: 'time3', title: '错收开始时间', width: 108, editor: 'text', align: 'center'},
                            {field: 'time4', title: '错收截止时间', width: 108, editor: 'text', align: 'center'},
                        ]]              	               	            
                    });

                     /* 点击按钮加载表格数据 */        
                    function show() {
                    	$.ajax({
                    		url:'../data/page.json',
                    		type:'get',
                    		dataType:'json',
                    		loadMsg: "查询数据请稍候。。。",
                    		success:function(data){
                    			$("#dg").datagrid('loadData',data);
                    			DATARESULT = data;//将加载的数据保存起来                  			
                    			$("#dg").datagrid("loadData", data.slice(0, 10));//加载前十条
                    			
                    			//分页实现
                    			var pager = $("#dg").datagrid("getPager");
                                pager.pagination({
                                    total: data.length,                        
                                    onSelectPage: function (pageNo, pageSize) {
                                        var start = (pageNo - 1) * pageSize;
                                        var end = start + pageSize;
                                        $("#dg").datagrid("loadData", data.slice(start, end));
                                        pager.pagination('refresh', {
                                            total: data.length,
                                            pageNumber: pageNo
                                        });
                                    }
                                });
                    		},
                    		err : function(xhr) {
                    			alert(xhr.status);
                    		}
                    	});
                    }
                    
                    /* 查询(根据地区) */
                   function doSearch() {                      
                       var newData =[];
                       var gridData  = DATARESULT;//拿到所有数据
                       //console.log(gridData);
                       //console.log(gridData.length);
                       for(var i = 0; i < gridData.length; i++){
                	   		if (gridData[i].area == $("#cc").combobox("getText")) {//根据地区筛选
                	   			newData.push(gridData[i]);
                	   		}
                	   }
                	   $("#dg").datagrid('loadData',newData);//重新加载筛选完后数据
				  }
     
                    /* 删除 */
                    function removeit() { 
	                	var selections  = $('#dg').datagrid('getSelections');//获取所有选中行
	                	var selectRows = [];
	                	for ( var i = 0; i < selections.length; i++) {
	                	    selectRows.push(selections[i]);//将选中的数据放入到新数组
	                	}
	                	if (selectRows.length == 0) {
	            			$.messager.confirm('Confirm', '请选择需要删除的行。');
	            		}
	                	if (selectRows.length) {
	            			$.messager.confirm('Confirm', '确定删除用户?', function(r) {
	            				if (r) {
	                				for(var j = 0; j < selectRows.length; j++){
		                	    		var index = $('#dg').datagrid('getRowIndex',selectRows[j]);
		                	    		$('#dg').datagrid('deleteRow',index);
		                	    		DATARESULT.splice(index,1);//根据索引删除已经保存的数据
	                					}	                				
	                	    		$.messager.confirm('Confirm', '删除成功');
	                	    		$("#dg").datagrid("loadData", DATARESULT);//更新本地数据
	                			 } 
	            			});
	                	}
	                    }
                    	
                    	/* 打开新增窗口 */
	                    function append(){
	                    	$('#new').window('open');
	                    };	                   	
	                    	
	                    /* 双击一行进行查看 */
                    	$('#dg').datagrid({
                    		onDblClickCell : function(index,field,value){//双击事件
                    			$('#win').window('open');//打开详情窗口                   			
                    			var row = $('#dg').datagrid('getSelected');//获取选中行的数据                   			
                    			if (row) {//将一行的每列数据存入文本框
                    				$("#iphone").val(row.phonenum);
                    				$("#iname").val(row.custn); 
                    				$("#iarea").val(row.area); 
                    				$("#icust").val(row.custi);
                    				$("#itime1").val(row.time1);
                    				$("#itime2").val(row.time2);
                    				$("#itime3").val(row.time3);
                    				$("#itime4").val(row.time4);
                    			}                  			                   		
                    		}
                    	});
                </script>
		</fieldset>
		</div>
	</div>
    </div>	
    <!-- 新建弹出框 -->
    <div id="new" class="webui-window" title="添加用户" data-options="modal:true,closed:true,iconCls:'icon-save'" 
    	style="width:950px;height:500px;padding:10px;background-color:#f2f2f2;">
		<div class="page-container" style="width:100%;">
    		<div class="grid" style="width: 933px;margin: 0 auto;">    				 
   				 <div class="input-groups">
		    <!--input-group-block的宽度和ui-input的宽度需要自行设定三列输入框宽度一般为122px-->
		    <div class="left input-group-block">
		        <form name="frm1"><p class="input-group-text " style="padding-left: 2em;" >级联市级<span style="color:#f7245b;"> * </span>：
		       		<SELECT name="optProvince" SIZE="1" ONCHANGE=ChangeCity() style="width:144px;" class="ui-input " id="area"> 
							<OPTION>--请选择--</OPTION> 
							<OPTION>杭州</OPTION> 
							<OPTION>湖州</OPTION> 
							<OPTION>嘉兴</OPTION>
							<OPTION>衢州</OPTION>
							<OPTION>绍兴</OPTION>
							<OPTION>台州</OPTION></SELECT> </p></form>
		        <p class="input-group-text " >退费服务号码<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small must1" id="phone"/> </p>
		        <p class="input-group-text " style="padding-left: 18px;">SP业务代码：<input type="text"  class="ui-input ui-input-small"/> </p>
		        <p class="input-group-text " style="padding-left: 2em;">客户名称<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small must2" id="cname"/> </p>		       	    	
		    </div>
		    <div class="left input-group-block">
		        <form name="frm2"><p class="input-group-text " style="padding-left: 4em;">级联地级：
		        <SELECT name="optCity" SIZE="1" class="ui-input " style="width:144px;"> <OPTION>--请选择--</OPTION> </SELECT></p></form>
		        <p class="input-group-text" style="padding-left: 3em;">操作员工号：<input type="text"  class="ui-input ui-input-small "/> </p>
		        <p class="input-group-text label " style="padding-left: 1em;">操作起始时间<span style="color:#f7245b;"> * </span>：
		        <input type="text" class="ui-input ui-input-small webui-datebox must3" id="start3"/> </p>
		        <p class="input-group-text label ">错收费用开始月<span style="color:#f7245b;"> * </span>：
		        <input type="text" class="ui-input ui-input-small webui-datebox must4" id="start4"/> </p>	        
		    </div>
		    <div class="left input-group-block">
		        <p class="input-group-text " style="padding-left: 3em;">客户标识<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small" id="custy"/> </p>	
		        <p class="input-group-text" style="padding-left: 2em;">子号用户信息：<input type="text"  class="ui-input ui-input-small "/> </p>
		        <p class="input-group-text label " style="padding-left: 1em;">操作截止时间<span style="color:#f7245b;"> * </span>：
		        <input type="text" class="ui-input ui-input-small webui-datebox must5" id="end3"/> </p>
		   		<p class="input-group-text label ">错收费用截止月<span style="color:#f7245b;"> * </span>：
		   		<input type="text"  class="ui-input ui-input-small webui-datebox must6" id="end4"/> </p>
		    </div>
		    <div style="clear: both;"></div><!-- 清除浮动带来影响 -->
		   		<!-- 手风琴处理非必填信息 -->
		   		<div id="accordion_demo" style="width:270px;height:auto;padding-left:2em;">
                    <div title="非必填信息">
                        <div style="padding: 20px;">
                            <p class="input-group-text">客户类型： <input id="aa" name="dept"  style="width:144px;"/>  </p>
   							 <p class="input-group-text"><span id="radio-nomarll" ></span></p>
                        </div>
                    </div>
                </div>
                   <!--  新增弹出窗口组件js -->
                <script> 
                	/* 手风琴中客户类型组合框 */
                	$('#aa').combobox({
                        valueField:'id',
                        textField:'text',
                        url:'../data/custype.json'
                    }); 
                	
                	/* 客户标识组合框 */
                	$('#custy').combobox({
                        valueField:'custid',
                        textField:'custname',
                        url:'../data/cust.json'
                    });
                	
                	/* 手风琴选择组件 */
                	var radio_normal = $("#radio-nomarll").AISelect({
            	    type: 'radio',
            	    displayField: 'channelName',
            	    valueField: 'channelId',
            	    data: [{
            	    	channelId: '1001',
            	    	channelName: '受理中',
            	    }, {
            	    	channelId: '1002',
            	   	    channelName: '待受理'
            	    }],          	   
            	    	must : false
            	    });               	
                </script>
		    <p>
		        <a  href="javascript:void(0)" class="webui-linkbutton btn-blue" id="btn-save" style="height:28px;">保存 </a>
		        <a  href="javascript:void(0)" class="webui-linkbutton btn-blue"  style="height:28px;" onclick="resve()">清空 </a>
		        <a  href="javascript:void(0)" class="webui-linkbutton btn-blue" onclick="$('#new').window('close')" style="height:28px;">退出 </a>
		    </p>
		   			</div>
				</div>
		   	</div>
		</div>
		<script>
			$(function () {			
            	$('#accordion_demo').accordion({'selected':false});//手风琴
                
            	/* 组合日期 */
            	$('#start3').datebox().datebox('calendar').calendar();
                $('#end3').datebox().datebox('calendar').calendar({
                    validator : function (date) {
                        var _start = $('#start3').datebox("getValue");
                        var _s = new Date(_start);
                        var _outStart = new Date(_s.getFullYear(), _s.getMonth(), _s.getDate());
                        return _outStart <= date;
                    }
                });
                $('#start4').datebox().datebox('calendar').calendar();
                $('#end4').datebox().datebox('calendar').calendar({
                    validator: function (date) {
                        var _start = $('#start4').datebox("getValue");
                        var _s = new Date(_start);
                        var _outStart = new Date(_s.getFullYear(), _s.getMonth(), _s.getDate());
                        return _outStart <= date;
                    }
                });             
			 })
               
			 	/* 保存按钮添加事件 */
                $("#btn-save").click(function(){
                	//获取必选框内容
                	var m1 = $(".must1").val();
                	var m2 = $(".must2").val();
                	var m3 = $(".must3").datebox('getValue');
                	var m4 = $(".must4").datebox('getValue');
                	var m5 = $(".must5").datebox('getValue');
                	var m6 = $(".must6").datebox('getValue');               	
                		if(m1&&m2&&m3&&m4&&m5&&m6){//如果必填框内容均不为空，可以新增数据              			
                			$('#dg').datagrid('appendRow',{
                				phonenum : $("#phone").val(),
                				custi : $("#custy").combobox("getText"),
                				custn : $("#cname").val(),
                				area : $("#area").val(),
                				time1 : $(".must3").datebox('getValue'),
                				time2 : $(".must5").datebox('getValue'),
                				time3 : $(".must4").datebox('getValue'),
                				time4 : $(".must6").datebox('getValue')              				
                			});
                			var da = $("#dg").datagrid("getData");//拿到当前页的数据
                			//console.log(da.rows[da.rows.length-1]);
                			DATARESULT.push(da.rows[da.rows.length-1]);//将添加的数据存入DATARESULT数组
                			alert("添加成功！");
                			$("#dg").datagrid("loadData",DATARESULT);//重新加载本地数据
                			$('#new').window('close');
                			return;
                		}else{
                			$.messager.alert('warning', '必填项输入框内容不能为空~', 'warning');
                			return;
                		}            
                }); 
			
				/* 新增窗口清空 */
				function resve() {
					$("#new input").val(" ");
				}
		</script>
		<!-- 双击弹出框 -->
		<div id="win" class="webui-window" title="信息修改" data-options="modal:true,closed:true,iconCls:'icon-save'" 
			style="width:950px;height:500px;padding:10px;background-color:#f2f2f2;">
		<div class="page-container" style="width:100%;">
    	<div class="grid" style="width: 933px;margin: 0 auto;">    				 
   				 <div class="input-groups">
		    <!--input-group-block的宽度和ui-input的宽度需要自行设定三列输入框宽度一般为122px-->
		    <div class="left input-group-block">
		        <p class="input-group-text " style="padding-left: 2em;" >级联市级<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small " id="iarea"/></p>
		        <p class="input-group-text " >退费服务号码<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small " id="iphone"/> </p>
		        <p class="input-group-text " style="padding-left: 18px;">SP业务代码：
		        <input type="text"  class="ui-input ui-input-small" disabled="disabled"/> </p>
		        <p class="input-group-text " style="padding-left: 2em;">客户名称<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small " id="iname"/> </p>		       	    	
		    </div>
		    <div class="left input-group-block">
		        <p class="input-group-text " style="padding-left: 4em;">级联地级：
		        <SELECT name="optCity" SIZE="1" class="ui-input " style="width:144px;" disabled="disabled"> <OPTION>--请选择--</OPTION> </SELECT></p>
		        <p class="input-group-text" style="padding-left: 3em;">操作员工号：
		        <input type="text"  class="ui-input ui-input-small " disabled="disabled"/> </p>
		        <p class="input-group-text label " style="padding-left: 1em;">操作起始时间<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small " id="itime1"/> </p>
		        <p class="input-group-text label ">错收费用开始月<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small " id="itime3"/> </p>	        
		    </div>
		    <div class="left input-group-block">
		        <p class="input-group-text " style="padding-left: 3em;">客户标识<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small " id="icust"/> </p>	
		        <p class="input-group-text" style="padding-left: 2em;">子号用户信息：
		        <input type="text"  class="ui-input ui-input-small " disabled="disabled"/> </p>
		        <p class="input-group-text label " style="padding-left: 1em;">操作截止时间<span style="color:#f7245b;"> * </span>：
		        <input type="text"  class="ui-input ui-input-small " id="itime2"/> </p>
		   		<p class="input-group-text label ">错收费用截止月<span style="color:#f7245b;"> * </span>：
		   		<input type="text"  class="ui-input ui-input-small " id="itime4"/> </p>
		    </div>
		    <div style="clear: both;"></div><!-- 清除浮动带来影响 -->
      
		    <p>
		        <a  href="javascript:void(0)" class="webui-linkbutton btn-blue" onclick="update()" style="height:28px;">更新 </a>
		        <a  href="javascript:void(0)" class="webui-linkbutton btn-blue" onclick="$('#win').window('close')" style="height:28px;">退出 </a>
		    </p>
		   			</div>
				</div>
		   	</div>
		</div>
		<!-- 数据更新 -->
		<script>
			function update(){			
				var row = $('#dg').datagrid('getSelected');//返回第一个选中的行或null	
				var inx = $('#dg').datagrid('getRowIndex',row);//得到选中行的索引
				$('#dg').datagrid('updateRow',{//根据索引更新指定行数据
					index: inx,
					row : {
						phonenum : $("#iphone").val(),
				    	custn : $("#iname").val(),
						area : $("#iarea").val(),
						custi : $("#icust").val(),
						time1 : $("#itime1").val(),
						time2 : $("#itime2").val(),
						time3 : $("#itime3").val(),
						time4 : $("#itime4").val()
					}
				});
				alert("更新成功!");
				$("#win").window("close");
			}
		</script>
		
		<div style="height:100px"></div>
		<div style="height:50px;background-color:#f2f2f2;"></div>	
</body>
</html>
